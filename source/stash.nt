data _stash {
| _Stash(
    // list of unfulfilled expectations
    expected: list(&text),
  )
}

constant _empty-stash: _stash {
  _Stash of {expected = []}
}

define _set-expected(os: list(&text), e: _stash): _stash {
  match e {
  | _Stash of {} =>
    _Stash of {expected = os}
  }
}

inline _join-stash(e1: _stash, e2: _stash): _stash {
  match e1, e2 {
  | _Stash(expected1), _Stash(expected2) =>
    _Stash(append(expected1, expected2))
  }
}

import {
  core.text {format},
  this.rule.expected-item {expected-item, show-expected-item},
  this.rule.point {point, show-point},
}

data parse-error {
| Parse-Error(
    found: text,
    expected: expected-item,
    error-location: point,
  )
}

define report(e: parse-error): text {
  let Parse-Error of {found, expected, error-location} = e in
  let error-location' = show-point(error-location) in
  format("parse error at {}:\nexpected:\n  {}\nfound:\n  {}", [error-location', show-expected-item(expected), found])
}
